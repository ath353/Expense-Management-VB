# ğŸš€ HÆ°á»›ng dáº«n Deploy lÃªn Railway - Chi tiáº¿t tá»«ng bÆ°á»›c

## âœ… Checklist trÆ°á»›c khi deploy

- [ ] Code Ä‘Ã£ Ä‘Æ°á»£c test ká»¹ trÃªn local
- [ ] ÄÃ£ cÃ³ tÃ i khoáº£n GitHub
- [ ] ÄÃ£ push code lÃªn GitHub repository
- [ ] ÄÃ£ táº¡o tÃ i khoáº£n Railway.app

---

## BÆ°á»›c 1: Chuáº©n bá»‹

### 1.1. Táº¡o tÃ i khoáº£n Railway
1. Truy cáº­p https://railway.app
2. Click "Login" vÃ  chá»n "Login with GitHub"
3. Authorize Railway truy cáº­p GitHub cá»§a báº¡n
4. Báº¡n sáº½ nháº­n $5 credit miá»…n phÃ­ má»—i thÃ¡ng

### 1.2. Generate APP_KEY
Cháº¡y lá»‡nh nÃ y trÃªn mÃ¡y local:
```bash
cd expense-management
php artisan key:generate --show
```

Copy key nÃ y (dáº¡ng `base64:xxxxx...`), báº¡n sáº½ cáº§n nÃ³ á»Ÿ bÆ°á»›c sau.

---

## BÆ°á»›c 2: Push code lÃªn GitHub


### Push code lÃªn GitHub:

**Náº¿u chÆ°a cÃ³ Git repository:**
```bash
cd expense-management
git init
git add .
git commit -m "Initial commit - Ready for Railway deployment"
git branch -M main
```

**Táº¡o repository trÃªn GitHub:**
1. VÃ o https://github.com/new
2. Äáº·t tÃªn repository (vÃ­ dá»¥: `expense-management`)
3. Chá»n **Private** (khuyáº¿n nghá»‹)
4. **KHÃ”NG** chá»n "Initialize with README"
5. Click "Create repository"

**Push code:**
```bash
git remote add origin https://github.com/YOUR_USERNAME/expense-management.git
git push -u origin main
```

---

## BÆ°á»›c 3: Deploy trÃªn Railway

### 3.1. Táº¡o Project má»›i
1. VÃ o https://railway.app/dashboard
2. Click "New Project"
3. Chá»n "Deploy from GitHub repo"
4. Chá»n repository `expense-management` cá»§a báº¡n
5. Click "Deploy Now"

Railway sáº½ báº¯t Ä‘áº§u build vÃ  deploy tá»± Ä‘á»™ng.

### 3.2. ThÃªm PostgreSQL Database
1. Trong Railway project, click nÃºt "New" (gÃ³c trÃªn bÃªn pháº£i)
2. Chá»n "Database"
3. Chá»n "Add PostgreSQL"
4. Railway sáº½ tá»± Ä‘á»™ng táº¡o database vÃ  link vá»›i app

### 3.3. Cáº¥u hÃ¬nh Environment Variables

Click vÃ o service Laravel app â†’ Tab "Variables" â†’ Click "Raw Editor"

Paste toÃ n bá»™ config nÃ y (thay `YOUR_APP_KEY` báº±ng key Ä‘Ã£ generate á»Ÿ bÆ°á»›c 1.2):

```env
APP_NAME=Expense Management
APP_ENV=production
APP_KEY=base64:YOUR_APP_KEY_HERE
APP_DEBUG=false
APP_URL=${{RAILWAY_PUBLIC_DOMAIN}}

APP_LOCALE=vi
APP_FALLBACK_LOCALE=en

LOG_CHANNEL=stack
LOG_LEVEL=error

DB_CONNECTION=pgsql
DB_HOST=${{Postgres.PGHOST}}
DB_PORT=${{Postgres.PGPORT}}
DB_DATABASE=${{Postgres.PGDATABASE}}
DB_USERNAME=${{Postgres.PGUSER}}
DB_PASSWORD=${{Postgres.PGPASSWORD}}

SESSION_DRIVER=database
SESSION_LIFETIME=120

CACHE_STORE=database
QUEUE_CONNECTION=database

MAIL_MAILER=log
MAIL_FROM_ADDRESS=noreply@expense-management.app
MAIL_FROM_NAME=Expense Management
```

**LÆ°u Ã½:** Railway tá»± Ä‘á»™ng inject cÃ¡c biáº¿n `${{Postgres.*}}` vÃ  `${{RAILWAY_PUBLIC_DOMAIN}}`

### 3.4. Generate Domain
1. VÃ o tab "Settings"
2. Scroll xuá»‘ng "Networking"
3. Click "Generate Domain"
4. Railway sáº½ táº¡o domain dáº¡ng: `your-app.up.railway.app`

---

## BÆ°á»›c 4: Kiá»ƒm tra Deployment

### 4.1. Xem Logs
1. Click vÃ o tab "Deployments"
2. Click vÃ o deployment má»›i nháº¥t
3. Xem logs Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng cÃ³ lá»—i

**Logs thÃ nh cÃ´ng sáº½ cÃ³:**
```
âœ“ Migrations ran successfully
âœ“ Config cached
âœ“ Routes cached
âœ“ Views cached
âœ“ Server started on 0.0.0.0:PORT
```

### 4.2. Truy cáº­p App
Click vÃ o domain Ä‘Ã£ generate (hoáº·c vÃ o tab "Settings" â†’ copy domain)

Báº¡n sáº½ tháº¥y trang welcome cá»§a app!

---

## BÆ°á»›c 5: Táº¡o User Ä‘áº§u tiÃªn

### Option 1: Qua Railway CLI
```bash
# CÃ i Railway CLI
npm i -g @railway/cli

# Login
railway login

# Link project
railway link

# Cháº¡y artisan command
railway run php artisan tinker
```

Trong tinker:
```php
$user = new App\Models\User();
$user->name = 'Admin';
$user->email = 'admin@example.com';
$user->password = bcrypt('password123');
$user->save();
```

### Option 2: Qua Database Seeder
Táº¡o file `database/seeders/AdminSeeder.php` vÃ  push lÃªn GitHub, Railway sáº½ tá»± Ä‘á»™ng redeploy.

---

## BÆ°á»›c 6: Cáº¥u hÃ¬nh bá»• sung (Optional)

### 6.1. Custom Domain
1. Tab "Settings" â†’ "Networking"
2. Click "Custom Domain"
3. Nháº­p domain cá»§a báº¡n (vÃ­ dá»¥: `expense.yourdomain.com`)
4. Cáº¥u hÃ¬nh DNS theo hÆ°á»›ng dáº«n cá»§a Railway

### 6.2. Cáº¥u hÃ¬nh Email (náº¿u cáº§n)
ThÃªm vÃ o Variables:
```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
```

### 6.3. TÄƒng Memory (náº¿u cáº§n)
Tab "Settings" â†’ "Resources" â†’ Adjust memory limit

---

## ğŸ”„ Auto-Deploy tá»« GitHub

Railway tá»± Ä‘á»™ng deploy má»—i khi báº¡n push code má»›i:

```bash
# Sau khi sá»­a code
git add .
git commit -m "Update feature X"
git push

# Railway sáº½ tá»± Ä‘á»™ng:
# 1. Detect changes
# 2. Build láº¡i app
# 3. Run migrations
# 4. Deploy version má»›i
```

---

## ğŸ› Troubleshooting

### Lá»—i: "No application encryption key"
- Kiá»ƒm tra biáº¿n `APP_KEY` trong Variables
- Äáº£m báº£o cÃ³ prefix `base64:`

### Lá»—i: "SQLSTATE[08006] Connection refused"
- Kiá»ƒm tra PostgreSQL service Ä‘Ã£ Ä‘Æ°á»£c add chÆ°a
- Kiá»ƒm tra cÃ¡c biáº¿n `${{Postgres.*}}` Ä‘Ã£ Ä‘Ãºng chÆ°a

### Lá»—i: "Class not found"
- XÃ³a cache: Tab "Settings" â†’ "Clear Cache"
- Trigger redeploy: Tab "Deployments" â†’ "Redeploy"

### App cháº¡y cháº­m
- Railway free tier cÃ³ giá»›i háº¡n resources
- Xem xÃ©t upgrade plan hoáº·c optimize queries

### Xem logs chi tiáº¿t
Set `APP_DEBUG=true` táº¡m thá»i (nhá»› táº¯t sau khi debug xong)

---

## ğŸ’° Chi phÃ­

**Free Tier:**
- $5 credit/thÃ¡ng
- 500 hours execution time
- Äá»§ cho personal projects vÃ  testing

**Khi nÃ o cáº§n upgrade:**
- Traffic cao (>10k requests/day)
- Cáº§n custom domain vá»›i SSL
- Cáº§n nhiá»u resources hÆ¡n

---

## ğŸ“Š Monitoring

### Xem metrics
Tab "Metrics" Ä‘á»ƒ xem:
- CPU usage
- Memory usage
- Network traffic
- Response times

### Alerts
Tab "Settings" â†’ "Notifications" Ä‘á»ƒ setup alerts khi cÃ³ lá»—i

---

## ğŸ”’ Security Checklist

- [x] `APP_DEBUG=false` trong production
- [x] `APP_ENV=production`
- [x] Database credentials Ä‘Æ°á»£c inject tá»± Ä‘á»™ng (secure)
- [x] `.env` khÃ´ng Ä‘Æ°á»£c commit vÃ o Git
- [x] HTTPS Ä‘Æ°á»£c enable tá»± Ä‘á»™ng bá»Ÿi Railway
- [ ] Setup 2FA cho tÃ i khoáº£n Railway
- [ ] Regular backup database (Railway cÃ³ snapshot feature)

---

## ğŸ“š TÃ i liá»‡u tham kháº£o

- Railway Docs: https://docs.railway.app
- Laravel Deployment: https://laravel.com/docs/deployment
- Railway Discord: https://discord.gg/railway (support ráº¥t tá»‘t!)

---

## ğŸ‰ HoÃ n thÃ nh!

App cá»§a báº¡n Ä‘Ã£ live táº¡i: `https://your-app.up.railway.app`

**Next steps:**
1. Test toÃ n bá»™ features
2. Táº¡o user accounts
3. Setup monitoring
4. Share vá»›i users!

ChÃºc báº¡n deploy thÃ nh cÃ´ng! ğŸš€
